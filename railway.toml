[build]
builder = "nixpacks"
# Surgical clean of rollup and lockfile to fix Linux binary issues without hitting locked cache
buildCommand = "rm -f package-lock.json && rm -rf node_modules/rollup && npm install && npm run build"

[deploy]
startCommand = "npm start --workspace=backend"
healthcheckPath = "/health"
healthcheckTimeout = 180
servicePort = 4000
